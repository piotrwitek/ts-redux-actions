import * as T from './type-helpers'; // type-tests global
import { ActionType } from './type-helpers';
import { createStandardAction } from './create-standard-action';
import { createReducer } from './create-reducer';
import { getType } from './get-type';

const add = createStandardAction('ADD')<number>();
const increment = createStandardAction('INCREMENT')();
const actions = { add, increment };

declare module './' {
  export type RootAction = ActionType<typeof actions>;
}

const initialState = 0;

// @dts-jest:group With Action Creators
{
  const reducerTest = createReducer(initialState);

  const counterReducer1 = reducerTest.handleAction(
    [add, increment],
    (state, action) => state + (action.type === 'ADD' ? action.payload : 1)
  );
  // @dts-jest:pass:snap -> T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<"ADD" | "INCREMENT", (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; }
  counterReducer1;
  // @dts-jest:pass
  Object.keys({ ...counterReducer1.handlers }); // => ["ADD", "INCREMENT"]
  // @dts-jest:pass
  Object.keys({ ...reducerTest.handlers }); // => []

  const counterReducer2 = reducerTest
    .handleAction([add], (state, action) => state + action.payload)
    .handleAction([increment], (state, _) => state + 1);
  // @dts-jest:pass:snap -> T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<"INCREMENT", (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; }
  counterReducer2;
  // @dts-jest:pass
  Object.keys({ ...counterReducer2.handlers }); // => ["ADD", "INCREMENT"]
  // @dts-jest:pass
  Object.keys({ ...reducerTest.handlers }); // => []

  const counterReducer3 = reducerTest.handleAction(
    add,
    (state, action) => state + action.payload
  );
  // @dts-jest:pass:snap -> T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<"ADD", (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends "INCREMENT", TTypeAction extends T.EmptyAction<"INCREMENT"> extends { type: TType; } ? { type: TType; } & T.EmptyAction<"INCREMENT"> : never, TCreator extends (...args: any[]) => T.EmptyAction<"INCREMENT">, TCreatorAction extends T.EmptyAction<"INCREMENT"> extends ReturnType<TCreator> ? ReturnType<TCreator> & T.EmptyAction<"INCREMENT"> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; } : T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.EmptyAction<"INCREMENT">) => number>; } : T.Reducer<number, T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & any; }; }; }; }; }; }; }; }; }; }; }
  counterReducer3;
  // @dts-jest:pass
  Object.keys({ ...counterReducer3.handlers }); // => [ "ADD"]
  // @dts-jest:pass
  Object.keys({ ...reducerTest.handlers }); // => []

  const counterReducer4 = reducerTest.handleAction(
    increment,
    (state, _) => state + 1
  );
  // @dts-jest:pass:snap -> T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<"INCREMENT", (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends "ADD", TTypeAction extends T.PayloadAction<"ADD", number> extends { type: TType; } ? { type: TType; } & T.PayloadAction<"ADD", number> : never, TCreator extends (...args: any[]) => T.PayloadAction<"ADD", number>, TCreatorAction extends T.PayloadAction<"ADD", number> extends ReturnType<TCreator> ? ReturnType<TCreator> & T.PayloadAction<"ADD", number> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; } : T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, T.PayloadAction<"ADD", number>> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number>) => number>; } : T.Reducer<number, T.PayloadAction<"ADD", number>> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number>) => number>; handleAction: <TType extends Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & any; }; }; }; }; }; }; }; }; }; }; }
  counterReducer4;
  // @dts-jest:pass
  Object.keys({ ...counterReducer4.handlers }); // => [ "INCREMENT"]
  // @dts-jest:pass
  Object.keys({ ...reducerTest.handlers }); // => []

  {
    [
      counterReducer1,
      counterReducer2,
      createReducer(initialState, {
        [getType(add)]: counterReducer3.handlers.ADD,
        [getType(increment)]: counterReducer4.handlers.INCREMENT,
      }),
    ].forEach(fn => {
      // @dts-jest:pass
      fn(0, {} as any); // => 0
      // @dts-jest:pass
      fn(0, increment()); // => 1
      // @dts-jest:pass
      fn(0, add(4)); // => 4
    });
  }
}

// @dts-jest:group With Action Types
{
  const reducerTest = createReducer(initialState);

  const counterReducer1 = reducerTest.handleAction(
    ['ADD', 'INCREMENT'],
    (state, action) => state + (action.type === 'ADD' ? action.payload : 1)
  );
  // @dts-jest:pass:snap -> T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<"ADD" | "INCREMENT", (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; }
  counterReducer1;
  // @dts-jest:pass
  Object.keys({ ...counterReducer1.handlers }); // => ["ADD", "INCREMENT"]
  // @dts-jest:pass
  Object.keys({ ...reducerTest.handlers }); // => []

  const counterReducer2 = reducerTest
    .handleAction(['ADD'], (state, action) => state + action.payload)
    .handleAction(['INCREMENT'], (state, _) => state + 1);
  // @dts-jest:pass:snap -> T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<"INCREMENT", (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; }
  counterReducer2;
  // @dts-jest:pass
  Object.keys({ ...counterReducer2.handlers }); // => ["ADD", "INCREMENT"]
  // @dts-jest:pass
  Object.keys({ ...reducerTest.handlers }); // => []

  const counterReducer3 = reducerTest.handleAction(
    'ADD',
    (state, action) => state + action.payload
  );
  // @dts-jest:pass:snap -> T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<"ADD", (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends "INCREMENT", TTypeAction extends T.EmptyAction<"INCREMENT"> extends { type: TType; } ? { type: TType; } & T.EmptyAction<"INCREMENT"> : never, TCreator extends (...args: any[]) => T.EmptyAction<"INCREMENT">, TCreatorAction extends T.EmptyAction<"INCREMENT"> extends ReturnType<TCreator> ? ReturnType<TCreator> & T.EmptyAction<"INCREMENT"> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; } : T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.EmptyAction<"INCREMENT">) => number>; } : T.Reducer<number, T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.EmptyAction<"INCREMENT">, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & any; }; }; }; }; }; }; }; }; }; }; }
  counterReducer3;
  // @dts-jest:pass
  Object.keys({ ...counterReducer3.handlers }); // => ["ADD"]
  // @dts-jest:pass
  Object.keys({ ...reducerTest.handlers }); // => []

  const counterReducer4 = reducerTest.handleAction(
    'INCREMENT',
    (state, _) => state + 1
  );
  // @dts-jest:pass:snap -> T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<"INCREMENT", (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends "ADD", TTypeAction extends T.PayloadAction<"ADD", number> extends { type: TType; } ? { type: TType; } & T.PayloadAction<"ADD", number> : never, TCreator extends (...args: any[]) => T.PayloadAction<"ADD", number>, TCreatorAction extends T.PayloadAction<"ADD", number> extends ReturnType<TCreator> ? ReturnType<TCreator> & T.PayloadAction<"ADD", number> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; } : T.Reducer<number, T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number> | T.EmptyAction<"INCREMENT">) => number>; handleAction: <TType extends Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, T.PayloadAction<"ADD", number>> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number>) => number>; } : T.Reducer<number, T.PayloadAction<"ADD", number>> & { handlers: Record<TActionIntersection["type"], (state: number, action: T.PayloadAction<"ADD", number>) => number>; handleAction: <TType extends Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; handleAction: <TType extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>["type"], TTypeAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends { type: TType; } ? { type: TType; } & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TCreator extends (...args: any[]) => Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TCreatorAction extends Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> extends ReturnType<TCreator> ? ReturnType<TCreator> & Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction> : never, TActionIntersection extends TTypeAction extends TCreatorAction ? TTypeAction : never>(singleOrMultipleCreatorsAndTypes: TType | TCreator | TType[] | TCreator[], reducer: (state: number, action: TActionIntersection) => number) => [Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>] extends [never] ? T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & { handlers: Record<TActionIntersection["type"], (state: number, action: Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>) => number>; } : T.Reducer<number, Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<Exclude<T.PayloadAction<"ADD", number>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>, TTypeAction & TCreatorAction>> & any; }; }; }; }; }; }; }; }; }; }; }
  counterReducer4;
  // @dts-jest:pass
  Object.keys({ ...counterReducer4.handlers }); // => [ "INCREMENT"]
  // @dts-jest:pass
  Object.keys({ ...reducerTest.handlers }); // => []

  {
    [
      counterReducer1,
      counterReducer2,
      createReducer(initialState, {
        ADD: counterReducer3.handlers.ADD,
        INCREMENT: counterReducer4.handlers.INCREMENT,
      }),
    ].forEach(fn => {
      // @dts-jest:pass
      fn(0, {} as any); // => 0
      // @dts-jest:pass
      fn(0, increment()); // => 1
      // @dts-jest:pass
      fn(0, add(4)); // => 4
    });
  }
}
